# Access Control

## Роли
- **Commander** — командир (постановка задач, подтверждение поражения).
- **BatteryOperator** — оператор батареи (управление орудиями и исполнение задач).
- **Observer** — наблюдатель (создание/уточнение целей, отправка корректировок).
- **Analyst** — аналитик/штаб (просмотр общей обстановки и истории).

## RBAC-матрица

| Ресурс / Действие | Commander | BatteryOperator | Observer | Analyst |
|---|---|---|---|---|
| Цели: просмотр | ✅ | ✅ | ✅ | ✅ |
| Цели: создание/изменение | ✅ | ✅ (в рамках своей батареи) | ✅ (создание и уточнение) | ❌ |
| Зоны безопасности: просмотр | ✅ | ✅ | ✅ | ✅ |
| Зоны безопасности: изменение | ✅ | ✅ (в рамках своей зоны ответственности) | ❌ | ❌ |
| Статус орудий: просмотр | ✅ | ✅ | ✅ (только подтверждённый оперативный статус) | ✅ |
| Статус орудий: изменение | ✅ | ✅ (только своих орудий) | ❌ | ❌ |
| Корректировки: просмотр | ✅ | ✅ | ✅ | ✅ |
| Корректировки: создание/изменение | ✅ (утверждение/отмена) | ✅ (принятие в работу) | ✅ (подача корректировки) | ❌ |

## Примечания
- Все операции изменения должны журналироваться (кто, что и когда изменил).
- В реальном времени применяется optimistic concurrency control для снижения конфликтов при одновременном редактировании.
- При конфликте прав приоритет у роли **Commander**.
