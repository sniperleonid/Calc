# Access Control

## Роли
- **Commander** — командир (создаёт комнату с паролем, распределяет роли, подтверждает поражение).
- **Gunner** — наводчик орудия (исполняет огневые задачи закреплённого орудия).
- **Observer** — наблюдатель (создаёт/уточняет цели, отправляет корректировки, запускает дроны).
- **Logistician** — логист (обрабатывает заявки на боеприпасы и снабжение).
- **Infantry** — пехотинец (получает оперативную обстановку и команды без прав редактирования огневых данных).

## RBAC-матрица

| Ресурс / Действие | Commander | Gunner | Observer | Logistician | Infantry |
|---|---|---|---|---|---|
| Комната: создание/пароль | ✅ | ❌ | ❌ | ❌ | ❌ |
| Комната: распределение ролей | ✅ | ❌ | ❌ | ❌ | ❌ |
| Цели: просмотр | ✅ | ✅ | ✅ | ✅ | ✅ |
| Цели: создание/изменение | ✅ | ✅ (в рамках своей батареи) | ✅ (создание и уточнение) | ❌ | ❌ |
| Статус орудий: просмотр | ✅ | ✅ | ✅ (оперативный статус) | ✅ | ✅ |
| Статус орудий: изменение | ✅ | ✅ (только своего орудия) | ❌ | ❌ | ❌ |
| Корректировки: создание | ✅ | ✅ (принятие в работу) | ✅ | ❌ | ❌ |
| Заявки логистики: создание | ✅ | ✅ | ❌ | ✅ | ❌ |
| Заявки логистики: исполнение | ✅ | ❌ | ❌ | ✅ | ❌ |
| Дрон наблюдателя: запуск | ✅ | ❌ | ✅ | ❌ | ❌ |

## Примечания
- Все операции изменения должны журналироваться (кто, что и когда изменил).
- В реальном времени применяется optimistic concurrency control для снижения конфликтов при одновременном редактировании.
- При конфликте прав приоритет у роли **Commander**.
